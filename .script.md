---
description: Workflow cháº¡y dá»± Ã¡n Transcript AI - chuyá»ƒn video/audio thÃ nh vÄƒn báº£n
---

# ğŸ™ï¸ TRANSCRIPT AI - WORKFLOW SCRIPT

## ğŸ“Œ ThÃ´ng tin dá»± Ã¡n
- **Version**: 3.1.0 (LATEST)
- **Tech Stack**: FastAPI + yt-dlp + Cloudflare AI (Whisper) + Vue 3 + Tailwind
- **TÃ­nh nÄƒng v3.1**:
  - **Auto-Chunking**: Tá»± Ä‘á»™ng xá»­ lÃ½ video dÃ i (cáº¯t nhá» 5p/chunk vÃ  gá»™p káº¿t quáº£)
  - **Timestamps**: Tráº£ vá» má»‘c thá»i gian chi tiáº¿t tá»«ng tá»« (.vtt)
  - **Download Info**: QuÃ©t Ä‘á»‹nh dáº¡ng & size video/audio cÃ³ sáºµn
  - Transcribe tá»« 1000+ nguá»“n (YouTube, Facebook, Instagram, TikTok...)
  - Upload file mÃ¡y tÃ­nh (kÃ©o tháº£/chá»n file - max 25MB)
  - Táº£i video/audio (MP4, MP3) nhiá»u cháº¥t lÆ°á»£ng
  - Timer hiá»ƒn thá»‹ thá»i gian xá»­ lÃ½ real-time

---

## ğŸ“‹ WORKFLOW CHáº Y Dá»° ÃN

### BÆ°á»›c 0: CÃ i Ä‘áº·t FFmpeg (Báº®T BUá»˜C - Chá»‰ lÃ m 1 láº§n)

FFmpeg cáº§n thiáº¿t Ä‘á»ƒ yt-dlp convert audio.

```powershell
# CÃ i Ä‘áº·t qua winget (Windows 10/11)
winget install --id Gyan.FFmpeg -e

# Hoáº·c táº£i tá»« https://ffmpeg.org/download.html
# Giáº£i nÃ©n vÃ  thÃªm vÃ o PATH
```

**Kiá»ƒm tra cÃ i Ä‘áº·t:**
```powershell
ffmpeg -version
```

### BÆ°á»›c 1: Cáº¥u hÃ¬nh Cloudflare (Chá»‰ lÃ m 1 láº§n)

```powershell
# Má»Ÿ file .env
notepad "d:\Clone Voice\Transcript\backend\.env"
```

Äiá»n credentials:
```env
CLOUDFLARE_ACCOUNT_ID=your_account_id
CLOUDFLARE_API_TOKEN=your_api_token
WHISPER_MODEL=@cf/openai/whisper
```

**Láº¥y credentials:**
1. ÄÄƒng nháº­p Cloudflare Dashboard
2. Chá»n "Workers & Pages" â†’ "Workers AI"
3. Copy Account ID vÃ  táº¡o API Token

### BÆ°á»›c 2: Cháº¡y Backend
// turbo
```powershell
cd "d:\Clone Voice\Transcript\backend"
.\venv\Scripts\activate
uvicorn app.main:app --reload --port 8888
```

### BÆ°á»›c 3: Cháº¡y Frontend
// turbo
```powershell
cd "d:\Clone Voice\Transcript\frontend"
npm run dev
```

### BÆ°á»›c 4: Má»Ÿ trÃ¬nh duyá»‡t

- **Frontend**: http://localhost:5173
- **API Docs**: http://localhost:8888/docs

---

## ğŸ“ GHI CHÃš QUAN TRá»ŒNG

### Vá» ngÃ´n ngá»¯ (Language)
- Tham sá»‘ `language` lÃ  **Gá»¢I Ã** cho Whisper, **KHÃ”NG pháº£i dá»‹ch tá»± Ä‘á»™ng**
- Náº¿u khÃ´ng chá»n, Whisper sáº½ tá»± Ä‘oÃ¡n ngÃ´n ngá»¯
- Chá»n Ä‘Ãºng ngÃ´n ngá»¯ giÃºp transcription chÃ­nh xÃ¡c hÆ¡n
- VÃ­ dá»¥: Video tiáº¿ng Viá»‡t nhÆ°ng khÃ´ng chá»n â†’ Whisper cÃ³ thá»ƒ Ä‘oÃ¡n sai lÃ  tiáº¿ng Anh

### Vá» nháº¡c (Music)
- Whisper chá»‰ nháº­n dáº¡ng **Lá»œI NÃ“I**, khÃ´ng pháº£i lyrics bÃ i hÃ¡t
- Khi gáº·p nháº¡c, output sáº½ lÃ  `[Music]` hoáº·c bá» qua
- Äá»ƒ nháº­n lyrics cáº§n dÃ¹ng service khÃ¡c (Shazam API + lyrics database)

### Vá» Facebook Reels
- Má»™t sá»‘ Facebook Reels vá»›i link `/share/r/...` cÃ³ format má»›i chÆ°a Ä‘Æ°á»£c yt-dlp há»— trá»£
- Link video thÆ°á»ng `/share/v/...` hoáº·c `/watch/...` hoáº¡t Ä‘á»™ng tá»‘t
- Giáº£i phÃ¡p: Update yt-dlp thÆ°á»ng xuyÃªn
```powershell
pip install --upgrade yt-dlp
```

### Vá» giá»›i háº¡n file & Video dÃ i
- **Upload**: Tá»‘i Ä‘a 25MB.
- **Transcription**: Cloudflare giá»›i háº¡n ~10MB/request. 
- **Giáº£i phÃ¡p v3.1**: Há»‡ thá»‘ng sáº½ **tá»± Ä‘á»™ng cáº¯t video dÃ i** thÃ nh cÃ¡c pháº§n 5 phÃºt báº±ng FFmpeg, transcribe tá»«ng pháº§n vÃ  gá»™p láº¡i. Báº¡n khÃ´ng cáº§n tá»± cáº¯t video thá»§ cÃ´ng ná»¯a.
- **Thá»i gian**: Video cÃ ng dÃ i, quÃ¡ trÃ¬nh gá»™p chunks sáº½ cÃ ng lÃ¢u (hiá»ƒn thá»‹ qua Timer).

---

## ğŸ”§ Xá»¬ LÃ Lá»–I THÆ¯á»œNG Gáº¶P

### Lá»—i: "FFmpeg not found"
```powershell
winget install --id Gyan.FFmpeg -e
# Restart terminal Ä‘á»ƒ cáº­p nháº­t PATH
```

### Lá»—i: "Cannot parse data" (Facebook)
- Link Reels format má»›i chÆ°a Ä‘Æ°á»£c há»— trá»£
- Thá»­ dÃ¹ng link video thÆ°á»ng hoáº·c update yt-dlp

### Lá»—i: "File too large" (413)
- Giáº£m cháº¥t lÆ°á»£ng audio hoáº·c dÃ¹ng video ngáº¯n hÆ¡n
- Chia video thÃ nh nhiá»u pháº§n

### Lá»—i: "Different languages"
- Video chá»©a nhiá»u ngÃ´n ngá»¯
- Chá»n 1 ngÃ´n ngá»¯ cá»¥ thá»ƒ trong dropdown

### Lá»—i: "Authentication failed"
- Kiá»ƒm tra láº¡i CLOUDFLARE_API_TOKEN
- Äáº£m báº£o token cÃ³ quyá»n "Workers AI"

---

## ğŸš€ API ENDPOINTS (v3.0)

| Method | Endpoint | MÃ´ táº£ |
|--------|----------|-------|
| GET | `/` | Health check |
| GET | `/health` | Health check |
| GET | `/platforms` | Danh sÃ¡ch platforms |
| GET | `/info` | ThÃ´ng tin API vÃ  giá»›i háº¡n |
| POST | `/formats` | QuÃ©t Ä‘á»‹nh dáº¡ng táº£i vá» (v3.1) |
| POST | `/transcribe` | Transcribe tá»« URL (Há»— trá»£ chunks + timeline) |
| POST | `/transcribe/upload` | Transcribe tá»« file upload |
| POST | `/download` | Táº£i video/audio |

### VÃ­ dá»¥ request:

**Transcribe tá»« URL:**
```bash
curl -X POST http://localhost:8888/transcribe \
  -H "Content-Type: application/json" \
  -d '{"url": "https://youtube.com/watch?v=xxx", "language": "vi"}'
```

**Upload file:**
```bash
curl -X POST http://localhost:8888/transcribe/upload \
  -F "file=@audio.mp3" \
  -F "language=en"
```

**Download video:**
```bash
curl -X POST http://localhost:8888/download \
  -H "Content-Type: application/json" \
  -d '{"url": "https://youtube.com/watch?v=xxx", "format": "mp4", "quality": "high"}'
```

---

## ğŸ“ Cáº¤U TRÃšC Dá»° ÃN

```
d:\Clone Voice\Transcript\
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py         # API endpoints (v3.0)
â”‚   â”‚   â”œâ”€â”€ config.py       # Configuration
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”œâ”€â”€ audio_downloader.py  # Download + video
â”‚   â”‚       â””â”€â”€ transcription.py     # Cloudflare Whisper
â”‚   â”œâ”€â”€ temp/               # Temp files (auto cleanup)
â”‚   â”œâ”€â”€ venv/               # Python venv
â”‚   â””â”€â”€ .env                # Credentials
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.vue         # Main component
â”‚   â”‚   â””â”€â”€ style.css       # Styles
â”‚   â””â”€â”€ vite.config.js      # Proxy config
â”œâ”€â”€ .script.md              # This file
â””â”€â”€ project.md              # Project overview
```

---

// turbo-all
